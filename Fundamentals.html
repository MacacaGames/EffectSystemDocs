<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.17" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Fundamentals | Effect System</title><meta name="description" content="A dynamic calculator for game effect">
    <link rel="preload" href="/assets/style-Cj22MYkn.css" as="style"><link rel="stylesheet" href="/assets/style-Cj22MYkn.css">
    <link rel="modulepreload" href="/assets/app-BZvxFgKV.js"><link rel="modulepreload" href="/assets/Fundamentals.html-Bm7mBlPC.js">
    <link rel="prefetch" href="/assets/Advanced.html-Cq-rYKAb.js" as="script"><link rel="prefetch" href="/assets/Effect Description.html-D6wYbMm1.js" as="script"><link rel="prefetch" href="/assets/Effect Editor Window.html-BiMXo7cl.js" as="script"><link rel="prefetch" href="/assets/EffectView.html-3zNoBQok.js" as="script"><link rel="prefetch" href="/assets/GettingStarted.html-BGR1EPa_.js" as="script"><link rel="prefetch" href="/assets/Installation.html-DOKxnAFg.js" as="script"><link rel="prefetch" href="/assets/Introduction.html-VjWc_YkI.js" as="script"><link rel="prefetch" href="/assets/Prepare Your Data.html-CwBhzyBR.js" as="script"><link rel="prefetch" href="/assets/index.html-Bd-Oq6_-.js" as="script"><link rel="prefetch" href="/assets/Serialization.html-C_bhDqyi.js" as="script"><link rel="prefetch" href="/assets/TroubleShooting.html-Dsy2F5aP.js" as="script"><link rel="prefetch" href="/assets/404.html-Cvdz4UJH.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-CoPml-By.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="https://vuejs.press/images/hero.png" alt="Effect System"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Effect System</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/Introduction.html" aria-label="Documentation"><!---->Documentation<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/Introduction.html" aria-label="Documentation"><!---->Documentation<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/Introduction.html" aria-label="Introduction"><!---->Introduction<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/Installation.html" aria-label="Installation"><!---->Installation<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item vp-sidebar-heading active" href="/Fundamentals.html" aria-label="Fundamentals"><!---->Fundamentals<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/Effect%20Editor%20Window.html" aria-label="Effect Editor Window"><!---->Effect Editor Window<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/Prepare%20Your%20Data.html" aria-label="Prepare Your Data"><!---->Prepare Your Data<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/Advanced.html" aria-label="Advanced"><!---->Advanced<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/TroubleShooting.html" aria-label="TroubleShooting"><!---->TroubleShooting<!----></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="fundamentals" tabindex="-1"><a class="header-anchor" href="#fundamentals"><span>Fundamentals</span></a></h1><h3 id="effectsystem" tabindex="-1"><a class="header-anchor" href="#effectsystem"><span>EffectSystem</span></a></h3><p>Before using the Effect System, you must first create an <code>EffectSystem</code> class, which will be responsible for managing the states and calculations of all effects.</p><p>After creating a new instance of EffectSystem, call <code>Init()</code> to complete the basic setup.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectSystem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>In the Unity environment, EffectSystem uses the singleton pattern by default. After calling <code>Init()</code>, you can retrieve the instance using <code>EffectSystem.Instance</code>.</p><p>If you are on a platform outside of Unity, or if you prefer to manage the instance yourself, you can ignore <code>EffectSystem.Instance</code> and use your own dependency management solution to handle the <code>EffectSystem</code> instance.</p><h3 id="ieffectableobject" tabindex="-1"><a class="header-anchor" href="#ieffectableobject"><span>IEffectableObject</span></a></h3><p>The <code>IEffectableObject</code> interface allows a C# object to have effects added or removed. Whether it&#39;s an enemy, a character, a card, or any other object you want to apply effects to, it should be made into an <code>IEffectableObject</code>.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IEffectableObject</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// Gets the display name of the IEffectableObject.</span></span>
<span class="line">    <span class="token doc-comment comment">/// Not strictly required, but very helpful for debugging.</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returns</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returns</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">GetDisplayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// Retrieves the parent Transform for the effect view based on the viewRoot.</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewRoot<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returns</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returns</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token return-type class-name">Transform</span> <span class="token function">GetEffectViewParent</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> viewRoot<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// Determines whether this IEffectableObject accepts the application of the </span></span>
<span class="line">    <span class="token doc-comment comment">/// provided info. This method should only include checks and should not perform </span></span>
<span class="line">    <span class="token doc-comment comment">/// any operations on the effect.</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returns</span><span class="token punctuation">&gt;</span></span>Returns false if this IEffectableObject reject the effect request.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returns</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ApprovedAddEffect</span><span class="token punctuation">(</span><span class="token class-name">EffectInfo</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// Triggered when an Effect Instance becomes active.</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEffectActive</span><span class="token punctuation">(</span><span class="token class-name">EffectInfo</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// Triggered when an Effect Instance becomes inactive.</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEffectDeactive</span><span class="token punctuation">(</span><span class="token class-name">EffectInfo</span> info<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// Determines if the object is still &quot;alive&quot;. Effect can only be attached to a alive IEffectableObject.</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returns</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returns</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">IsAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// Since the actual runtime values are maintained by the IEffectableObject, </span></span>
<span class="line">    <span class="token doc-comment comment">/// implement the values needed for your game.</span></span>
<span class="line">    <span class="token doc-comment comment">/// For example, ATK_Current = ATK_Constant * ATK_Ratio.</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>parameterKey<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returns</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returns</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">GetRuntimeValue</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> parameterKey<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token doc-comment comment">/// Destroys the IEffectableObject.</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DestoryEffectableObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="effect-instance" tabindex="-1"><a class="header-anchor" href="#effect-instance"><span>Effect Instance</span></a></h3><p>Objects generated at runtime that inherit from <code>EffectInstanceBase</code> are called effect instances. Effect instance is created based on <code>EffectInfo</code>. Weâ€™ll talk about that later. For now, you can think of <code>EffectInfo</code> as a storage space for various parameters of the effect.</p><h3 id="basic-effect-implementation" tabindex="-1"><a class="header-anchor" href="#basic-effect-implementation"><span>Basic effect implementation</span></a></h3><p>A basic effect can involve the addition or subtraction of a value. Therefore, simply declaring a class that inherits from <code>EffectInstanceBase</code> and adding a constructor will complete the implementation of an effect.</p><p>The Effect System uses reflection to find the class specified by the <code>EffectInfo</code> type. The search follows the naming convention of <mark style="background:yellow;">Effect_{type}</mark>, so you must name your <code>EffectInstanceBase</code> implementation according to this format.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token comment">//a basic implementation</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Effect_ATK_Constant</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EffectInstanceBase</span></span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">Effect_ATK_Constant</span><span class="token punctuation">(</span><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>effectSystem<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Next, by calling <code>EffectSystem.AddEffect</code> and passing in the effect&#39;s owner and <code>EffectInfo</code>, you can create an effect instance and attach it to an IEffectableObject.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token comment">// Define two effects with the same type</span></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkSmall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkSmall&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">IEffectableObject</span> player<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//Get the EffectSystem using your dependency management solution</span></span>
<span class="line"><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkSmall<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> sumValue <span class="token operator">=</span> effectSystem<span class="token punctuation">.</span><span class="token function">GetEffectSum</span><span class="token punctuation">(</span> player<span class="token punctuation">,</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// // sumValue is 100s</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="advanced-effect-implementation" tabindex="-1"><a class="header-anchor" href="#advanced-effect-implementation"><span>Advanced effect implementation</span></a></h3><p>If you need more than just simple addition or subtraction of values, you can override the variables and methods provided by <code>EffectInstanceBase</code>, and customize the behavior of the Effect.</p><p>Example:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token comment">// Create a new class that inherits from the EffectInstanceBase class</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Effect_MyEffect</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EffectInstanceBase</span></span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">Effect_MyEffect</span><span class="token punctuation">(</span><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>effectSystem<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span>If the effect value of this type for the owner exceeds the set value, the effect will not be applied.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> maxEffectValue <span class="token operator">=&gt;</span> <span class="token number">100</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span>The upper and lower limits of the value obtained by this EffectType.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token punctuation">(</span><span class="token keyword">float</span> min<span class="token punctuation">,</span> <span class="token keyword">float</span> max<span class="token punctuation">)</span></span> sumLimit <span class="token operator">=&gt;</span> <span class="token number">100f</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">Effect_MyEffect</span><span class="token punctuation">(</span><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>effectSystem<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnActive</span><span class="token punctuation">(</span><span class="token class-name">EffectTriggerConditionInfo</span> triggerConditionInfo<span class="token punctuation">)</span>    </span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnDeactive</span><span class="token punctuation">(</span><span class="token class-name">EffectTriggerConditionInfo</span> triggerConditionInfo<span class="token punctuation">)</span>   </span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnCooldownEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    </span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// For a trigger-based effect, you can inherit from the EffectTriggerBase class</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Effect_Myffect</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EffectTriggerBase</span></span></span>
<span class="line"><span class="token punctuation">{</span> </span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">Effect_MyEffect</span><span class="token punctuation">(</span><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>effectSystem<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Execute immediately after OnActive().</span></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTrigger</span><span class="token punctuation">(</span><span class="token class-name">EffectTriggerConditionInfo</span> conditionInfo<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="effectinfo" tabindex="-1"><a class="header-anchor" href="#effectinfo"><span>EffectInfo</span></a></h3><p><code>EffectInfo</code> defines an effect by storing its settings but does not handle the runtime behavior.</p><table><thead><tr><th>Field</th><th>Data Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>string</td><td>The unique ID of an effect</td></tr><tr><td>type</td><td>string</td><td>The type of the effect</td></tr><tr><td>value</td><td>float</td><td>The value of the effect</td></tr><tr><td>activeCondition</td><td>string</td><td>The condition that triggers the effect</td></tr><tr><td>activeRequirementLists</td><td>string[]</td><td>The requirements for triggering the effect</td></tr><tr><td>activeProbability</td><td>float</td><td>The probability (0-1) of the effect being activated</td></tr><tr><td>deactiveCondition</td><td>string</td><td>The condition that deactivates the effect</td></tr><tr><td>deactiveRequirementLists</td><td>string[]</td><td>The requirements for deactivating the effect</td></tr><tr><td>deactiveProbability</td><td>float</td><td>The probability (0-1) of the effect being deactivated</td></tr><tr><td>maintainTime</td><td>float</td><td>The duration for which the effect remains active</td></tr><tr><td>cooldownTime</td><td>float</td><td>The cooldown time in seconds before the effect can be activated again</td></tr><tr><td>logic</td><td>enum</td><td>Life cycle management preset logic, see <a href="#triggertranstype">TriggerTransType</a> for more details</td></tr><tr><td>triggerTransType</td><td>enum</td><td>An enumeration for managing the logic when the effect is triggered more than once, see <a href="#effectlifecyclelogic">EffectLifeCycleLogic</a> for detailss</td></tr><tr><td>tags</td><td>string[]</td><td>Tags are typically used for categorization and can be checked to achieve more complex effects.</td></tr><tr><td>subInfoIds</td><td>string[]</td><td>At runtime, subInfoIds are converted into effect instances, which are used to achieve more complex effects. Check the <a href="###subinfo">SubInfo</a> section for more details.</td></tr><tr><td>viewInfoIds</td><td>string[]</td><td>The IDs of the view data for the effect</td></tr><tr><td>parameters</td><td>Dictionary&lt;string, string&gt;</td><td>Parameters are designed as a string dictionary, allowing you to set custom variables and achieve more complex effects.</td></tr></tbody></table><h3 id="condition" tabindex="-1"><a class="header-anchor" href="#condition"><span>Condition</span></a></h3><p><code>activeCondition</code> and <code>deactiveCondition</code> determines when an effect becomes active and when it deactivates.</p><table><thead><tr><th>Field</th><th>Data Type</th><th>Description</th></tr></thead><tbody><tr><td>activeCondition</td><td>string</td><td>The condition that triggers the effect activation</td></tr><tr><td>deactiveCondition</td><td>string</td><td>The condition that triggers the effect deactivation</td></tr></tbody></table><p>Example:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkSmall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkSmall&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    activeCondition <span class="token operator">=</span> <span class="token string">&quot;ConditionOnAttack&quot;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">MyCharacter</span> character <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffects</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkSmall<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// first add call</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyCharacter</span><span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEffectableObject</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// All Effect Instances on &#39;this&#39; object with activeCondition == &quot;ConditionOnAttack&quot; will attempt to activate.</span></span>
<span class="line">        effectSystem<span class="token punctuation">.</span><span class="token function">EffectTriggerCondition</span><span class="token punctuation">(</span><span class="token string">&quot;ConditionOnAttack&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The system provides two default conditions, which it will attempt to execute when processing the effect&#39;s lifecycle:</p><ul><li><code>ActiveCondition.OnEffectStart</code></li></ul><p>This active condition is fulfilled as soon as the effect is applied to an <code>IEffectableObject</code>, and it immediately triggers <code>OnActive()</code>.</p><ul><li><code>DeactiveCondition.AfterActive</code></li></ul><p>This deactive condition is fulfilled once <code>OnActive()</code> has been executed, and it immediately triggers <code>OnDeactive()</code>.</p><h3 id="requirementlists" tabindex="-1"><a class="header-anchor" href="#requirementlists"><span>RequirementLists</span></a></h3><p><code>activeRequirementLists</code> and <code>deactiveRequirementLists</code> are used to add constraints to condition triggers. The condition will only be triggered if these constraints are met.</p><table><thead><tr><th>Field</th><th>Data Type</th><th>Description</th></tr></thead><tbody><tr><td>activeRequirementLists</td><td>string[]</td><td>The qualifications required to activate the effect</td></tr><tr><td>deactiveRequirementLists</td><td>string[]</td><td>The qualifications required to deactivate the effect</td></tr></tbody></table><br><p>A requirement is defined by the <code>ConditionRequirement</code> class, and a <code>ConditionRequirement</code> is a check against a specific value.</p><p>Example:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token comment">//This ConditionRequirement checks if the owner&#39;s HP is below 30%.</span></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> conditionExample <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConditionRequirement</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;isLowHealth&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    conditionParameter<span class="token operator">=</span> <span class="token string">&quot;HP_Ratio&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    requirementLogic<span class="token operator">=</span> ConditionLogic<span class="token punctuation">.</span>Less<span class="token punctuation">,</span></span>
<span class="line">    conditionValue<span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span></span>
<span class="line">    isCheckOwner<span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>To set a requirement, you first need to inject a method to query <code>ConditionRequirement</code>. Then, fill in the ID of ConditionRequirement in the <code>requirementLists</code> of <code>EffectInfo</code>. This way, the effect can find the corresponding <code>ConditionRequirement</code> at runtime.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SkillSystem</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//prepare your activeRequirements data</span></span>
<span class="line">    <span class="token keyword">static</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>ConditionRequirement<span class="token punctuation">&gt;</span></span> activeRequirements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ConditionRequirement<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">static</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>ConditionRequirement<span class="token punctuation">&gt;</span></span> deactiveRequirements <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ConditionRequirement<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// register methods to get corresponding requirements</span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RegisterStaticMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>EffectInfo<span class="token punctuation">.</span>GetActiveRequirementLists <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            EffectInfo<span class="token punctuation">.</span>GetActiveRequirementLists <span class="token operator">=</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token function">GetActiveRequirements</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>EffectInfo<span class="token punctuation">.</span>GetDeactiveRequirementLists <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            EffectInfo<span class="token punctuation">.</span>GetDeactiveRequirementLists <span class="token operator">=</span> <span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">=&gt;</span></span>
<span class="line">            <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token function">GetDeactiveRequirements</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// implement searching method </span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>ConditionRequirement<span class="token punctuation">&gt;</span></span> <span class="token function">GetActiveRequirements</span><span class="token punctuation">(</span><span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> activeRequirements<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> ids<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>ConditionRequirement<span class="token punctuation">&gt;</span></span> <span class="token function">GetDeactiveRequirements</span><span class="token punctuation">(</span><span class="token class-name">IEnumerable<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> ids<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> deactiveRequirements<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> ids<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="probability" tabindex="-1"><a class="header-anchor" href="#probability"><span>Probability</span></a></h3><p>Probability makes the effect trigger based on chance. <code>activeProbability</code> = 0.4 means that when the effect&#39;s <code>activeCondition</code> is triggered, there is a 40% chance that the effect will continue to execute <code>OnActive()</code>.</p><table><thead><tr><th>Field</th><th>Data Type</th><th>Description</th></tr></thead><tbody><tr><td>activeProbability</td><td>float</td><td>The probability (0-1) of the effect being activated</td></tr><tr><td>deactiveProbability</td><td>float</td><td>The probability (0-1) of the effect being deactivated</td></tr></tbody></table><p>When Probability is set to 0, the Effect System will skip the probability check.</p><h3 id="time-management" tabindex="-1"><a class="header-anchor" href="#time-management"><span>Time Management</span></a></h3><p>Different games may use different time units. For example, action or RPG games may use seconds as the time unit, while turn-based games might use round as the time unit. You will need to implement the time calculation logic based on your project&#39;s needs.</p><p>For games based on seconds, you can typically update the timer in Update, with delta being <code>Time.deltaTime</code></p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    EffectSystem<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">TickEffectTimer</span><span class="token punctuation">(</span>EffectSystemScriptableBuiltIn<span class="token punctuation">.</span>TimerTickerId<span class="token punctuation">.</span>Default <span class="token punctuation">,</span>Time<span class="token punctuation">.</span>deltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>For round-based games, update the timer in the callback for each round, with delta possibly being 1 (round)</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token return-type class-name">IEnumerator</span> <span class="token function">Round</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">         EffectSystem<span class="token punctuation">.</span>Instance<span class="token punctuation">.</span><span class="token function">TickEffectTimer</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WaitForNextRound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="maintaintime" tabindex="-1"><a class="header-anchor" href="#maintaintime"><span>MaintainTime</span></a></h4><p>Effect System provides a method to manage the time-based lifecycle of an effect. Use the maintainTime field to define how long an effect should remain active. If <code>maintainTime</code> is greater than 0, the effect will follow a time-based lifecycle. You can use <a href="#triggertranstype">TriggerTransType</a> and <a href="#effectlifecyclelogic">EffectLifeCycleLogic</a> to control more specific behaviors. On the other hand, if maintainTime is 0, the effect&#39;s lifecycle will not be affected by time.</p><blockquote><p>The unit of &quot;Time&quot; is defined by the project, such as seconds, actions, or rounds. In the example below, we assume the unit of time is seconds.</p></blockquote><p>Example:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkSmall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkSmall&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">    maintainTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// No time-based lifecycle</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkMedium <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkMedium&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">    maintainTime <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 10-second duration</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">IEffectableObject</span> target<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffects</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkSmall<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffects</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkMedium<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> effectSystem<span class="token punctuation">.</span><span class="token function">GetEffectSum</span><span class="token punctuation">(</span> target<span class="token punctuation">,</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// result is 300 </span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//wait 10 seconds</span></span>
<span class="line"><span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> effectSystem<span class="token punctuation">.</span><span class="token function">GetEffectSum</span><span class="token punctuation">(</span> target<span class="token punctuation">,</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// result is 100 </span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="cooldowntime" tabindex="-1"><a class="header-anchor" href="#cooldowntime"><span>CooldownTime</span></a></h4><p>An Effect can be activated and deactivated freely before being recycled. <code>CooldownTime</code> is used to restrict how long the Effect cannot be reactivated after it has been deactivated. It also uses <a href="#triggertranstype">TriggerTransType</a> and <a href="#effectlifecyclelogic">EffectLifeCycleLogic</a> to control more detailed behaviors.</p><p>Example:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkSmall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;HealSelfSmall&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;HealSelf&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">    maintainTime <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span></span>
<span class="line">    cooldownTime <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token comment">// 10-second cooldown</span></span>
<span class="line">    activeCondition <span class="token operator">=</span> <span class="token string">&quot;ConditionOnAttack&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    deactiveCondition <span class="token operator">=</span> <span class="token string">&quot;AfterActive&quot;</span><span class="token punctuation">,</span> <span class="token comment">//AfterActive is a built-in condition. The effect will deactivate immediately after OnActive() is triggered.</span></span>
<span class="line"></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Make a IEffectableObject</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyCharacter</span><span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEffectableObject</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">DoAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        effectSystem<span class="token punctuation">.</span><span class="token function">EffectTriggerCondition</span><span class="token punctuation">(</span><span class="token string">&quot;ConditionOnAttack&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//Make a HealSelf effect </span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Effect_HealSelf</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EffectInstanceBase</span></span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">Effect_HealSelf</span><span class="token punctuation">(</span><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>effectSystem<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">     <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnActive</span><span class="token punctuation">(</span><span class="token class-name">EffectTriggerConditionInfo</span> condidionInfo<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Heal Self Implementation&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">MyCharacter</span> character <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//apply effect</span></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffects</span><span class="token punctuation">(</span>character<span class="token punctuation">,</span> effectAddAtkSmall<span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"></span>
<span class="line"><span class="token comment">// Trigger HealSelf succeeded. Deactive immediately and start cooldown timer</span></span>
<span class="line">character<span class="token punctuation">.</span><span class="token function">DoAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Trigger HealSelf failed. Because effect is still in cooldown </span></span>
<span class="line">character<span class="token punctuation">.</span><span class="token function">DoAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">await</span> Task<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span>TimeSpan<span class="token punctuation">.</span><span class="token function">FromSeconds</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Trigger HealSelf succeeded.</span></span>
<span class="line">character<span class="token punctuation">.</span><span class="token function">DoAttack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pre-define-enums" tabindex="-1"><a class="header-anchor" href="#pre-define-enums"><span>Pre-define Enums</span></a></h3><h4 id="triggertranstype" tabindex="-1"><a class="header-anchor" href="#triggertranstype"><span>TriggerTransType</span></a></h4><p>If the Effect is already active and <code>OnActive()</code> is triggered again, <code>TriggerTransType</code> can determine how the Effect should be handled:</p><table><thead><tr><th>Field</th><th>Data Description</th></tr></thead><tbody><tr><td>SkipNewOne</td><td>Ignore the repeated trigger request</td></tr><tr><td>CutOldOne</td><td>Call <code>OnDeactive()</code> first, then immediately call <code>OnActive()</code>.</td></tr></tbody></table><h4 id="effectlifecyclelogic" tabindex="-1"><a class="header-anchor" href="#effectlifecyclelogic"><span>EffectLifeCycleLogic</span></a></h4><p><code>EffectLifeCycleLogic</code> provides some common lifecycle logic to reduce the hassle of creating Effects.</p><table><thead><tr><th>Field</th><th>Data Description</th></tr></thead><tbody><tr><td>None</td><td>Do nothing</td></tr><tr><td>OnlyActiveOnce</td><td>The effect will only activate once and will be recycled afterward</td></tr><tr><td>ReactiveAfterCooldownEnd</td><td>automatically activate after the cooldown time ends</td></tr></tbody></table><h3 id="manipulating-effect" tabindex="-1"><a class="header-anchor" href="#manipulating-effect"><span>Manipulating Effect</span></a></h3><p>The Effect System provides various methods for adding, removing, and querying effects. Below are some commonly used methods.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>AddRequestedEffects</code></td><td>Adds effects to an <code>IEffectableObject</code>. In other words, create an effect instance owned by the <code>IEffectableObject</code>. EffectSystem will check <code>ApprovedAddEffect()</code> of the <code>IEffectableObject</code> before adding.</td></tr><tr><td><code>RemoveEffectByTag</code></td><td>Removes all EffectInstances from an IEffectableObject by their tags.</td></tr><tr><td><code>RemoveEffectsByType</code></td><td>Removes all EffectInstances from an IEffectableObject by their type.</td></tr><tr><td><code>GetEffectSum</code></td><td>Gets the total value of all effects of the specified type on an IEffectableObject.</td></tr><tr><td><code>GetEffectsByType</code></td><td>Retrieves a list of EffectInstances on an IEffectableObject based on their type.</td></tr></tbody></table><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token comment">// Define two effects with the same type</span></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkSmall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkSmall&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkMedium <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkMedium&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Effect_ATK_Constant</span><span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EffectInstanceBase</span></span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">Effect_ATK_Constant</span><span class="token punctuation">(</span><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>effectSystem<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">IEffectableObject</span> target<span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//Get the EffectSystem using your dependency management solution</span></span>
<span class="line"><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkSmall<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkMedium<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">/* or</span>
<span class="line">effectSystem.AddRequestedEffects(</span>
<span class="line">    target, new []{</span>
<span class="line">        effectAddAtkSmall,</span>
<span class="line">        effectAddAtkMedium</span>
<span class="line">    }   </span>
<span class="line">);</span>
<span class="line">*/</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> sumValue <span class="token operator">=</span> effectSystem<span class="token punctuation">.</span><span class="token function">GetEffectSum</span><span class="token punctuation">(</span> target<span class="token punctuation">,</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// sumValue is 300 </span></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effects <span class="token operator">=</span> effectSystem<span class="token punctuation">.</span><span class="token function">GetEffectsByType</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">// effects.count = 2</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="lifecycle-of-an-effect-instance" tabindex="-1"><a class="header-anchor" href="#lifecycle-of-an-effect-instance"><span>Lifecycle of an effect instance:</span></a></h4><p><img src="/assets/lifecycle-BMAGsJ6f.png" alt=""></p><h4 id="runtime-value" tabindex="-1"><a class="header-anchor" href="#runtime-value"><span>Runtime Value</span></a></h4><p>Runtime value is a user-defined value, useful for projects that require complex value calculations involving multiple effect types.</p><p>See the follow example:</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkSmall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkSmall&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkMedium <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkMedium&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkSmall_Ratio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkSmall_Ratio&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Ratio&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">0.05</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> effectAddAtkMedium_Ratio <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EffectInfo</span><span class="token punctuation">{</span></span>
<span class="line">    id <span class="token operator">=</span> <span class="token string">&quot;AddAtkMedium_Ratio&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    type <span class="token operator">=</span> <span class="token string">&quot;ATK_Ratio&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">value</span> <span class="token operator">=</span> <span class="token number">0.08</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token doc-comment comment">/// Other parameters are ignored in this example</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">IEffectableObject</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">MyCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkSmall<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkMedium<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkSmall_Ratio<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffect</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> effectAddAtkMedium_Ratio<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyCharcter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IEffectableObject</span></span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Use IEffectableObject.GetRuntimeValue(string) to get the user-defined runtime value</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">float</span></span> <span class="token function">GetRuntimeValue</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> parameterKey<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">switch</span><span class="token punctuation">(</span>parameterKey<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">case</span> <span class="token string">&quot;CurrentATK&quot;</span><span class="token punctuation">:</span></span>
<span class="line">                <span class="token punctuation">{</span></span>
<span class="line">                    <span class="token class-name"><span class="token keyword">var</span></span> result_constant <span class="token operator">=</span> effectSystem<span class="token punctuation">.</span><span class="token function">GetEffectSum</span><span class="token punctuation">(</span> target<span class="token punctuation">,</span> <span class="token string">&quot;ATK_Constant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token class-name"><span class="token keyword">var</span></span> result_ratio <span class="token operator">=</span> effectSystem<span class="token punctuation">.</span><span class="token function">GetEffectSum</span><span class="token punctuation">(</span> target<span class="token punctuation">,</span> <span class="token string">&quot;ATK_Ratio&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                    <span class="token comment">// result_constant is 300 </span></span>
<span class="line">                    <span class="token comment">// result_ratio is 0.13 </span></span>
<span class="line"></span>
<span class="line">                    <span class="token comment">// The runtime value is defined by IEffectableObject in your project</span></span>
<span class="line">                    <span class="token comment">// In this example, &quot;ATK_Constant&quot; defines the base ATK value, and &quot;ATK_Ratio&quot; defines the boost ratio. The actual result is calculated at runtime.</span></span>
<span class="line">                    <span class="token keyword">return</span> result_constant <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1f</span> <span class="token operator">+</span> result_ratio<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">                <span class="token keyword">break</span><span class="token punctuation">;</span></span>
<span class="line">            <span class="token keyword">default</span><span class="token punctuation">:</span></span>
<span class="line">                <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="remove-or-clean-effect" tabindex="-1"><a class="header-anchor" href="#remove-or-clean-effect"><span>Remove or Clean Effect</span></a></h3><p>The system will not automatically recycle the effect instance, so please remember to actively recycle it when the effect is no longer needed.</p><table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>CleanEffectableObject</code></td><td>Removes all EffectInstances from an IEffectableObject.</td></tr><tr><td><code>RemoveEffectByTag</code></td><td>Removes all EffectInstances from an IEffectableObject by their tags.</td></tr><tr><td><code>RemoveEffectsByType</code></td><td>Removes all EffectInstances from an IEffectableObject by their type.</td></tr></tbody></table><p>In most cases, simply calling <code>CleanEffectableObject</code> on the <code>IEffectableObject</code> in play at the end of a game is sufficient.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"></span>
<span class="line"><span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnGameEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name"><span class="token keyword">var</span></span> effectables <span class="token operator">=</span> <span class="token function">GetEffectablesOnField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> obj <span class="token keyword">in</span> effectables<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        effectSystem<span class="token punctuation">.</span><span class="token function">CleanEffectableObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token return-type class-name">List<span class="token punctuation">&lt;</span>IEffectableObject<span class="token punctuation">&gt;</span></span> <span class="token function">GetEffectablesOnField</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//Get your IEffectables</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="subinfo" tabindex="-1"><a class="header-anchor" href="#subinfo"><span>SubInfo</span></a></h3><p>SubInfo is an abbreviation for a <code>EffectInfo</code> under another <code>EffectInfo</code>. It&#39;s a design used to allow <code>EffectInfo</code> to carry additional <code>EffectInfo</code>, and can be applied to effects that rely on other effects. For example, when <code>OnActive</code> is triggered, it applies two effects to the owner.</p><p>To enable <code>EffectInfo</code> to find SubInfo, you need to first fill in all SubInfo IDs in <code>subInfoIds</code>. Then, register an event to look up SubInfo, allowing the Effect System to convert the IDs into actual <code>EffectInfo</code> instances at runtime.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SkillSystem</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//prepare your effects data</span></span>
<span class="line">    <span class="token keyword">static</span> <span class="token class-name">List<span class="token punctuation">&lt;</span>EffectInfo<span class="token punctuation">&gt;</span></span> effects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>EffectInfo<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// register methods to get EffectInfo</span></span>
<span class="line">    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">RegisterStaticMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        EffectDataProvider<span class="token punctuation">.</span><span class="token function">SetEffectInfoDelegate</span><span class="token punctuation">(</span>GetEffectByIds<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// implement searching method </span></span>
<span class="line">    <span class="token keyword">static</span> <span class="token return-type class-name">List<span class="token punctuation">&lt;</span>EffectInfo<span class="token punctuation">&gt;</span></span> <span class="token function">GetEffectByIds</span><span class="token punctuation">(</span><span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> effectIds<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>effects <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> effects<span class="token punctuation">.</span>Count <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;Please complete fetch effect first&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        <span class="token keyword">return</span> effects<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> effectIds<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Then, you can access subInfos in EffectInstanceBase.</p><div class="language-csharp line-numbers-mode" data-highlighter="prismjs" data-ext="cs" data-title="cs"><pre><code><span class="line"><span class="token comment">//Attach subInfos to self when triggered</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Effect_Trigger_Attach</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EffectTriggerBase</span></span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">Effect_Trigger_Attach</span><span class="token punctuation">(</span><span class="token class-name">EffectSystem</span> effectSystem<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>effectSystem<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnTrigger</span><span class="token punctuation">(</span><span class="token class-name">EffectTriggerConditionInfo</span> conditionInfo<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        effectSystem<span class="token punctuation">.</span><span class="token function">AddRequestedEffects</span><span class="token punctuation">(</span>owner<span class="token punctuation">,</span> info<span class="token punctuation">.</span>subInfos<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: oldman@macaca.onmicrosoft.com">oldman</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/Installation.html" aria-label="Installation"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Installation</span></div></a><a class="route-link auto-link next" href="/Effect%20Editor%20Window.html" aria-label="Effect Editor Window"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Effect Editor Window</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BZvxFgKV.js" defer></script>
  </body>
</html>
